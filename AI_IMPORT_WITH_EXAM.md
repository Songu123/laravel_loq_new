# HÆ°á»›ng dáº«n Import cÃ¢u há»i tá»« PDF vÃ  táº¡o Ä‘á» thi

## ğŸ¯ Tá»•ng quan

TÃ­nh nÄƒng nÃ y cho phÃ©p giÃ¡o viÃªn:
1. Upload file PDF chá»©a cÃ¢u há»i tráº¯c nghiá»‡m
2. AI tá»± Ä‘á»™ng trÃ­ch xuáº¥t cÃ¢u há»i vÃ  Ä‘Ã¡p Ã¡n
3. Xem láº¡i vÃ  chá»‰nh sá»­a cÃ¢u há»i
4. **Táº¡o Ä‘á» thi má»›i** vá»›i tÃªn vÃ  thÃ´ng tin cá»¥ thá»ƒ
5. LÆ°u cÃ¢u há»i vÃ o Ä‘á» thi Ä‘Ã£ táº¡o

## ğŸ“‹ YÃªu cáº§u file PDF

### Äá»‹nh dáº¡ng chuáº©n:
- CÃ¢u há»i pháº£i Ä‘Æ°á»£c Ä‘Ã¡nh sá»‘: **CÃ¢u 1**, **CÃ¢u 2**, **Question 1**, v.v.
- Má»—i cÃ¢u há»i cÃ³ **Ã­t nháº¥t 1 Ä‘Ã¡p Ã¡n** (A, B, C, D, ...)
- File PDF tá»‘i Ä‘a **10MB**

### CÃ¡ch Ä‘Ã¡nh dáº¥u Ä‘Ã¡p Ã¡n Ä‘Ãºng (3 cÃ¡ch):

#### 1. Ghi rÃµ Ä‘Ã¡p Ã¡n Ä‘Ãºng:
```
CÃ¢u 1: Thá»§ Ä‘Ã´ cá»§a Viá»‡t Nam lÃ  gÃ¬?
A. HÃ  Ná»™i
B. SÃ i GÃ²n
C. ÄÃ  Náºµng
D. Huáº¿
ÄÃ¡p Ã¡n: A
```

#### 2. BÃ´i mÃ u/highlight Ä‘Ã¡p Ã¡n Ä‘Ãºng:
```
CÃ¢u 2: 2 + 2 = ?
A. 3
B. 4  â† (bÃ´i mÃ u/highlight)
C. 5
D. 6
```

#### 3. In Ä‘áº­m hoáº·c gáº¡ch chÃ¢n Ä‘Ã¡p Ã¡n Ä‘Ãºng:
```
CÃ¢u 3: Python lÃ  ngÃ´n ngá»¯ gÃ¬?
A. **Láº­p trÃ¬nh** â† (in Ä‘áº­m)
B. Tá»± nhiÃªn
C. MÃ¡y mÃ³c
D. Há»™i há»a
```

## ğŸš€ Quy trÃ¬nh sá»­ dá»¥ng

### BÆ°á»›c 1: Upload PDF

1. ÄÄƒng nháº­p vá»›i tÃ i khoáº£n **Teacher**
2. VÃ o menu **"AI Import Questions"** â†’ **"Upload PDF"**
3. Chá»n file PDF (tá»‘i Ä‘a 10MB)
4. Chá»n:
   - **Danh má»¥c** máº·c Ä‘á»‹nh cho cÃ¢u há»i
   - **NgÃ´n ngá»¯**: Tiáº¿ng Viá»‡t hoáº·c Tiáº¿ng Anh
   - **Äá»™ khÃ³** máº·c Ä‘á»‹nh: Dá»…, Trung bÃ¬nh, KhÃ³
5. Nháº¥n **"Upload vÃ  trÃ­ch xuáº¥t"**

### BÆ°á»›c 2: Xem láº¡i cÃ¢u há»i

Há»‡ thá»‘ng hiá»ƒn thá»‹ táº¥t cáº£ cÃ¢u há»i Ä‘Ã£ trÃ­ch xuáº¥t:

- âœ… TÃ­ch chá»n cÃ¢u há»i muá»‘n lÆ°u (máº·c Ä‘á»‹nh chá»n táº¥t cáº£)
- âœï¸ Chá»‰nh sá»­a ná»™i dung cÃ¢u há»i náº¿u cáº§n
- ğŸ”„ Thay Ä‘á»•i danh má»¥c hoáº·c Ä‘á»™ khÃ³
- ğŸ¯ Chá»n Ä‘Ã¡p Ã¡n Ä‘Ãºng (radio button)
- â• ThÃªm Ä‘Ã¡p Ã¡n má»›i náº¿u cáº§n
- ğŸ—‘ï¸ XÃ³a cÃ¢u há»i khÃ´ng cáº§n thiáº¿t

**Chá»©c nÄƒng hÃ ng loáº¡t:**
- Chá»n táº¥t cáº£ cÃ¢u há»i cÃ¹ng lÃºc
- Äá»•i danh má»¥c cho nhiá»u cÃ¢u há»i
- Äá»•i Ä‘á»™ khÃ³ cho nhiá»u cÃ¢u há»i

### BÆ°á»›c 3: Táº¡o Ä‘á» thi

Khi nháº¥n **"LÆ°u cÃ¢u há»i"**, má»™t modal sáº½ hiá»‡n ra yÃªu cáº§u:

1. **TÃªn Ä‘á» thi** (*báº¯t buá»™c*)
   - VD: "Kiá»ƒm tra giá»¯a ká»³ mÃ´n ToÃ¡n lá»›p 10"

2. **MÃ´ táº£** (tÃ¹y chá»n)
   - VD: "Äá» thi kiá»ƒm tra kiáº¿n thá»©c chÆ°Æ¡ng 1-3"

3. **Thá»i gian lÃ m bÃ i** (*báº¯t buá»™c*)
   - ÄÆ¡n vá»‹: PhÃºt
   - GiÃ¡ trá»‹: 5-300 phÃºt
   - Máº·c Ä‘á»‹nh: 60 phÃºt

4. **Tá»•ng Ä‘iá»ƒm** (*báº¯t buá»™c*)
   - GiÃ¡ trá»‹: 1-1000 Ä‘iá»ƒm
   - Máº·c Ä‘á»‹nh: 10 Ä‘iá»ƒm
   - Äiá»ƒm sáº½ Ä‘Æ°á»£c chia Ä‘á»u cho cÃ¡c cÃ¢u há»i

5. **Tráº¡ng thÃ¡i Ä‘á» thi**:
   - ğŸ“„ **NhÃ¡p**: ChÆ°a cÃ´ng bá»‘, há»c sinh khÃ´ng tháº¥y
   - âœ… **CÃ´ng bá»‘**: Há»c sinh cÃ³ thá»ƒ thi ngay

### BÆ°á»›c 4: HoÃ n táº¥t

Sau khi nháº¥n **"Táº¡o Ä‘á» thi vÃ  lÆ°u cÃ¢u há»i"**:

1. Há»‡ thá»‘ng táº¡o Ä‘á» thi má»›i
2. LÆ°u táº¥t cáº£ cÃ¢u há»i Ä‘Ã£ chá»n vÃ o Ä‘á» thi
3. TÃ­nh toÃ¡n Ä‘iá»ƒm cho tá»«ng cÃ¢u (chia Ä‘á»u)
4. Chuyá»ƒn Ä‘áº¿n trang chi tiáº¿t Ä‘á» thi

## ğŸ“Š Káº¿t quáº£

Sau khi lÆ°u thÃ nh cÃ´ng:

- Äá» thi má»›i Ä‘Æ°á»£c táº¡o vá»›i slug tá»± Ä‘á»™ng
- CÃ¢u há»i Ä‘Æ°á»£c sáº¯p xáº¿p theo thá»© tá»±
- Metadata lÆ°u thÃ´ng tin:
  - `category_id`: Danh má»¥c gá»‘c
  - `difficulty`: Äá»™ khÃ³
  - `imported_from`: "ai_pdf"
  - `imported_at`: Thá»i gian import

## ğŸ” Kiá»ƒm tra vÃ  chá»‰nh sá»­a

Sau khi táº¡o Ä‘á» thi:

1. VÃ o **"Quáº£n lÃ½ Ä‘á» thi"** â†’ TÃ¬m Ä‘á» vá»«a táº¡o
2. Nháº¥n **"Xem chi tiáº¿t"** Ä‘á»ƒ kiá»ƒm tra
3. **Chá»‰nh sá»­a** náº¿u cáº§n:
   - ThÃªm/xÃ³a cÃ¢u há»i
   - Sá»­a ná»™i dung cÃ¢u há»i
   - Äiá»u chá»‰nh Ä‘iá»ƒm sá»‘
   - Thay Ä‘á»•i thá»i gian
4. **GÃ¡n cho lá»›p há»c** náº¿u muá»‘n
5. **CÃ´ng bá»‘** khi Ä‘Ã£ sáºµn sÃ ng

## âš™ï¸ Cáº¥u hÃ¬nh há»‡ thá»‘ng

### Khá»Ÿi Ä‘á»™ng Python AI Service:

**Windows:**
```bash
# CÃ¡ch 1: DÃ¹ng file bat
start-python-api.bat

# CÃ¡ch 2: Cháº¡y thá»§ cÃ´ng
cd python_api_service
python app.py
```

**API cháº¡y táº¡i:** `http://127.0.0.1:5001`

### Khá»Ÿi Ä‘á»™ng Laravel:

```bash
php artisan serve
# Server: http://127.0.0.1:8000
```

### Kiá»ƒm tra káº¿t ná»‘i:

```bash
# Test Python API
curl http://127.0.0.1:5001/health

# Káº¿t quáº£ mong Ä‘á»£i:
# {"status":"healthy","service":"LOQ AI Question Extractor"}
```

## ğŸ› Xá»­ lÃ½ lá»—i thÆ°á»ng gáº·p

### 1. "Python API khÃ´ng káº¿t ná»‘i Ä‘Æ°á»£c"

**NguyÃªn nhÃ¢n:**
- Python API chÆ°a cháº¡y
- Port 5001 bá»‹ chiáº¿m

**Giáº£i phÃ¡p:**
```bash
# Kiá»ƒm tra Python API Ä‘Ã£ cháº¡y chÆ°a
curl http://127.0.0.1:5001/health

# Náº¿u chÆ°a cháº¡y, khá»Ÿi Ä‘á»™ng:
cd python_api_service
python app.py
```

### 2. "SQLSTATE[HY000]: Field 'exam_id' doesn't have a default value"

**NguyÃªn nhÃ¢n:**
- ÄÃ£ Ä‘Æ°á»£c sá»­a! BÃ¢y giá» há»‡ thá»‘ng táº¡o Exam trÆ°á»›c khi lÆ°u Question

**Giáº£i phÃ¡p:**
- Cáº­p nháº­t code má»›i nháº¥t
- LuÃ´n nháº­p tÃªn Ä‘á» thi trÆ°á»›c khi lÆ°u

### 3. "KhÃ´ng trÃ­ch xuáº¥t Ä‘Æ°á»£c cÃ¢u há»i"

**NguyÃªn nhÃ¢n:**
- File PDF khÃ´ng Ä‘Ãºng Ä‘á»‹nh dáº¡ng
- CÃ¢u há»i khÃ´ng Ä‘Æ°á»£c Ä‘Ã¡nh sá»‘

**Giáº£i phÃ¡p:**
- Kiá»ƒm tra file PDF cÃ³ Ä‘á»‹nh dáº¡ng:
  - `CÃ¢u 1:`, `CÃ¢u 2:`, hoáº·c
  - `Question 1:`, `Question 2:`, hoáº·c
  - `CÃ¢u há»i 1:`, `CH 1:`
- Äáº£m báº£o Ä‘Ã¡p Ã¡n cÃ³ kÃ½ tá»± A, B, C, D

### 4. "KhÃ´ng nháº­n diá»‡n Ä‘Ã¡p Ã¡n Ä‘Ãºng"

**Giáº£i phÃ¡p:**
- DÃ¹ng 1 trong 3 cÃ¡ch Ä‘Ã¡nh dáº¥u:
  1. Ghi rÃµ "ÄÃ¡p Ã¡n: A"
  2. BÃ´i mÃ u/highlight Ä‘Ã¡p Ã¡n Ä‘Ãºng
  3. In Ä‘áº­m `**A. ÄÃ¡p Ã¡n**`
- Náº¿u AI khÃ´ng nháº­n Ä‘Æ°á»£c, chá»n thá»§ cÃ´ng á»Ÿ bÆ°á»›c Review

## ğŸ“ LÆ°u Ã½ quan trá»ng

1. **LuÃ´n kiá»ƒm tra láº¡i** cÃ¢u há»i sau khi AI trÃ­ch xuáº¥t
2. **KhÃ´ng thá»ƒ sá»­a Ä‘á» thi** sau khi há»c sinh Ä‘Ã£ thi
3. **Backup file PDF gá»‘c** Ä‘á»ƒ import láº¡i náº¿u cáº§n
4. **Giá»›i háº¡n file**: 10MB, Ä‘á»‹nh dáº¡ng PDF
5. **Ãt nháº¥t 1 Ä‘Ã¡p Ã¡n**: Má»—i cÃ¢u há»i pháº£i cÃ³ tá»‘i thiá»ƒu 1 Ä‘Ã¡p Ã¡n
6. **TÃªn Ä‘á» thi unique**: Slug tá»± Ä‘á»™ng Ä‘áº£m báº£o khÃ´ng trÃ¹ng láº·p

## ğŸ“ VÃ­ dá»¥ thá»±c táº¿

### Táº¡o Ä‘á» thi "Kiá»ƒm tra ToÃ¡n 10"

1. Upload PDF cÃ³ 20 cÃ¢u há»i
2. AI trÃ­ch xuáº¥t â†’ Chá»n 15 cÃ¢u tá»‘t nháº¥t
3. Táº¡o Ä‘á» thi:
   - TÃªn: "Kiá»ƒm tra giá»¯a ká»³ ToÃ¡n 10 - HK1"
   - Thá»i gian: 45 phÃºt
   - Tá»•ng Ä‘iá»ƒm: 10 Ä‘iá»ƒm
   - Tráº¡ng thÃ¡i: NhÃ¡p
4. LÆ°u â†’ Má»—i cÃ¢u Ä‘Æ°á»£c 10/15 = 0.67 Ä‘iá»ƒm
5. Kiá»ƒm tra vÃ  gÃ¡n cho lá»›p 10A, 10B
6. CÃ´ng bá»‘ khi sáºµn sÃ ng

## ğŸ”— Links liÃªn quan

- **Upload PDF**: `/teacher/ai-import/upload`
- **Review Questions**: `/teacher/ai-import/review`
- **Quáº£n lÃ½ Ä‘á» thi**: `/teacher/exams`
- **API Health Check**: `http://127.0.0.1:5001/health`
- **API Documentation**: `http://127.0.0.1:5001/docs`

## ğŸ“ Há»— trá»£

Náº¿u gáº·p váº¥n Ä‘á»:
1. Kiá»ƒm tra log: `storage/logs/laravel.log`
2. Kiá»ƒm tra Python console
3. Xem chi tiáº¿t lá»—i trong modal alert

---

**PhiÃªn báº£n:** 2.0 (CÃ³ táº¡o Ä‘á» thi)  
**Cáº­p nháº­t:** 25/10/2025  
**AI Engine:** Python FastAPI + PyMuPDF + Tesseract OCR
